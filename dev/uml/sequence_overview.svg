<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2080px" preserveAspectRatio="none" style="width:937px;height:2080px;" version="1.1" viewBox="0 0 937 2080" width="937px" zoomAndPan="magnify">
    <defs />
    <g><text fill="#000000" font-family="Helvetica" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="290" x="319.25" y="41.3486">MaSiMiWa - Sequence Overview</text>
        <rect fill="#DDDDDD" height="2015.9609" style="stroke: #A80036; stroke-width: 1.0;" width="561.5" x="338" y="53.5938" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="583.75" y="65.6606">MaSyMoS</text>
        <rect fill="#AAAAFF" height="1850.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="163" y="145.0234" />
        <rect fill="#AAFFAA" height="1850.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="145.0234" />
        <rect fill="#FFFFFF" height="495.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="257.5547" />
        <rect fill="#FFFFFF" height="194.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="557.75" />
        <rect fill="#FFFFFF" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="873.2109" />
        <rect fill="#FFFFFF" height="79.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1139.4063" />
        <rect fill="#FFFFFF" height="616.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1369.6016" />
        <rect fill="#FFFFFF" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="353.9531" />
        <rect fill="#FFFFFF" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="622.1484" />
        <rect fill="#FFFFFF" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="902.3438" />
        <rect fill="#FFFFFF" height="72.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="1441.8672" />
        <rect fill="#FFFFFF" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="1591.5313" />
        <rect fill="#FFFFFF" height="161.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="1795.4609" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="426.2188" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="694.4141" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="931.4766" />
        <rect fill="#FFFFFF" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="1471" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="1663.7969" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="1891.8594" />
        <rect fill="#FFFFEE" height="176.7969" style="stroke: #000000; stroke-width: 2.0;" width="573.5" x="332" y="315.6875" />
        <rect fill="#EEFFEE" height="207.9297" style="stroke: #000000; stroke-width: 2.0;" width="593.5" x="322" y="1529.1328" />
        <rect fill="#FFFFEE" height="176.7969" style="stroke: #000000; stroke-width: 2.0;" width="573.5" x="332" y="1553.2656" />
        <rect fill="#EEFFEE" height="118.5313" style="stroke: #000000; stroke-width: 2.0;" width="346" x="559.5" y="1810.4609" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="168" x2="168" y1="135.0234" y2="2004.2578" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="379" x2="379" y1="135.0234" y2="2004.2578" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="627.5" x2="627.5" y1="135.0234" y2="2004.2578" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="800.5" x2="800.5" y1="135.0234" y2="2004.2578" />
        <rect fill="#FEFECE" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="143" y="103.7266" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="150" y="123.7217">SEEK</text>
        <rect fill="#FEFECE" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="143" y="2003.2578" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="150" y="2023.2529">SEEK</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="342" y="131.7217">MaSiMiWa</text>
        <ellipse cx="379" cy="102.7266" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="375,90.7266,381,85.7266,379,90.7266,381,95.7266,375,90.7266" style="stroke: #A80036; stroke-width: 1.0;" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="342" y="2016.2529">MaSiMiWa</text>
        <ellipse cx="379" cy="2035.5547" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="375,2023.5547,381,2018.5547,379,2023.5547,381,2028.5547,375,2023.5547" style="stroke: #A80036; stroke-width: 1.0;" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="569.5" y="131.7217">MaSyMoS-Morre</text>
        <ellipse cx="628" cy="102.7266" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="624,90.7266,630,85.7266,628,90.7266,630,95.7266,624,90.7266" style="stroke: #A80036; stroke-width: 1.0;" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="569.5" y="2016.2529">MaSyMoS-Morre</text>
        <ellipse cx="628" cy="2035.5547" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;" />
        <polygon fill="#A80036" points="624,2023.5547,630,2018.5547,628,2023.5547,630,2028.5547,624,2023.5547" style="stroke: #A80036; stroke-width: 1.0;" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="183" x="706.5" y="131.7217">masymos_neo4j_database</text>
        <path d="M783,82.7266 C783,72.7266 801,72.7266 801,72.7266 C801,72.7266 819,72.7266 819,82.7266 L819,108.7266 C819,118.7266 801,118.7266 801,118.7266 C801,118.7266 783,118.7266 783,108.7266 L783,82.7266 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;" />
        <path d="M783,82.7266 C783,92.7266 801,92.7266 801,92.7266 C801,92.7266 819,92.7266 819,82.7266 " fill="none" style="stroke: #000000; stroke-width: 1.5;" /><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="183" x="706.5" y="2016.2529">masymos_neo4j_database</text>
        <path d="M783,2029.5547 C783,2019.5547 801,2019.5547 801,2019.5547 C801,2019.5547 819,2019.5547 819,2029.5547 L819,2055.5547 C819,2065.5547 801,2065.5547 801,2065.5547 C801,2065.5547 783,2065.5547 783,2055.5547 L783,2029.5547 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;" />
        <path d="M783,2029.5547 C783,2039.5547 801,2039.5547 801,2039.5547 C801,2039.5547 819,2039.5547 819,2029.5547 " fill="none" style="stroke: #000000; stroke-width: 1.5;" />
        <rect fill="#AAAAFF" height="1850.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="163" y="145.0234" />
        <rect fill="#AAFFAA" height="1850.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="145.0234" />
        <rect fill="#FFFFFF" height="495.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="257.5547" />
        <rect fill="#FFFFFF" height="194.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="557.75" />
        <rect fill="#FFFFFF" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="873.2109" />
        <rect fill="#FFFFFF" height="79.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1139.4063" />
        <rect fill="#FFFFFF" height="616.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1369.6016" />
        <rect fill="#FFFFFF" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="353.9531" />
        <rect fill="#FFFFFF" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="622.1484" />
        <rect fill="#FFFFFF" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="902.3438" />
        <rect fill="#FFFFFF" height="72.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="1441.8672" />
        <rect fill="#FFFFFF" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="1591.5313" />
        <rect fill="#FFFFFF" height="161.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="623" y="1795.4609" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="426.2188" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="694.4141" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="931.4766" />
        <rect fill="#FFFFFF" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="1471" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="1663.7969" />
        <rect fill="#FFFFFF" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="796" y="1891.8594" />
        <rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="922.5" x="3" y="165.5898" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="165.5898" y2="165.5898" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="168.5898" y2="168.5898" />
        <rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="70" x="429.25" y="155.0234" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="435.25" y="171.0903">INSERT</text>
        <polygon fill="#FBFB77" points="76,193.1563,260,193.1563,270,212.1563,260,231.1563,76,231.1563,66,212.1563,76,193.1563" style="stroke: #A80036; stroke-width: 1.0;" />
        <ellipse cx="83.5" cy="204.7891" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="89" y="209.2231">user added a public model</text>
        <ellipse cx="83.5" cy="219.9219" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="89" y="224.356">user made a model public</text>
        <polygon fill="#A80036" points="367,253.5547,377,257.5547,367,261.5547,371,257.5547" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="173" x2="373" y1="257.5547" y2="257.5547" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="180" y="252.4888">insert_model(id)</text>
        <polygon fill="#A80036" points="184,282.6875,174,286.6875,184,290.6875,180,286.6875" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="378" y1="286.6875" y2="286.6875" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="190" y="281.6216">get json (link)</text>
        <polygon fill="#A80036" points="367,296.6875,377,300.6875,367,304.6875,371,300.6875" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="173" x2="373" y1="300.6875" y2="300.6875" />
        <path d="M332,315.6875 L409,315.6875 L409,322.6875 L399,332.6875 L332,332.6875 L332,315.6875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;" />
        <rect fill="none" height="176.7969" style="stroke: #000000; stroke-width: 2.0;" width="573.5" x="332" y="315.6875" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="347" y="328.7544">loop</text><text fill="#000000" font-family="Helvetica" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="424" y="327.8979">[insert each content]</text>
        <polygon fill="#A80036" points="611,349.9531,621,353.9531,611,357.9531,615,353.9531" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="617" y1="353.9531" y2="353.9531" /><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="396" y="348.8872">add_model</text>
        <polygon fill="#A80036" points="913.5,379.0859,923.5,383.0859,913.5,387.0859,917.5,383.0859" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="919.5" y1="383.0859" y2="383.0859" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="640" y="378.02">get file from the Internet</text>
        <polygon fill="#A80036" points="644,393.0859,634,397.0859,644,401.0859,640,397.0859" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="924.5" y1="397.0859" y2="397.0859" />
        <polygon fill="#A80036" points="784,422.2188,794,426.2188,784,430.2188,788,426.2188" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="790" y1="426.2188" y2="426.2188" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="640" y="421.1528">insert new model</text>
        <polygon fill="#A80036" points="644,451.3516,634,455.3516,644,459.3516,640,455.3516" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="800" y1="455.3516" y2="455.3516" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="650" y="450.2856">SUCCESS</text>
        <polygon fill="#A80036" points="400,480.4844,390,484.4844,400,488.4844,396,484.4844" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="627" y1="484.4844" y2="484.4844" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="406" y="479.4185">SUCCESS</text>
        <polygon fill="#A80036" points="184,516.6172,174,520.6172,184,524.6172,180,520.6172" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="378" y1="520.6172" y2="520.6172" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="190" y="515.5513">SUCCESS</text>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="436" y1="544.75" y2="544.75" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="436" x2="436" y1="544.75" y2="557.75" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="395" x2="436" y1="557.75" y2="557.75" />
        <polygon fill="#A80036" points="405,553.75,395,557.75,405,561.75,401,557.75" style="stroke: #A80036; stroke-width: 1.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="401" y="539.6841">start annotation job in background</text>
        <polygon fill="#A80036" points="611,618.1484,621,622.1484,611,626.1484,615,622.1484" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="617" y1="622.1484" y2="622.1484" /><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="401" y="586.8169">create_annotation_index</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="401" y="601.9497">upgrade annotations, etc.</text><text fill="#000000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="107" x="401" y="617.0825">for the whole DB</text>
        <polygon fill="#A80036" points="913.5,647.2813,923.5,651.2813,913.5,655.2813,917.5,651.2813" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="919.5" y1="651.2813" y2="651.2813" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="640" y="646.2153">get data from the Internet</text>
        <polygon fill="#A80036" points="644,661.2813,634,665.2813,644,669.2813,640,665.2813" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="924.5" y1="665.2813" y2="665.2813" />
        <polygon fill="#A80036" points="784,690.4141,794,694.4141,784,698.4141,788,694.4141" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="790" y1="694.4141" y2="694.4141" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="640" y="689.3481">insert additional data</text>
        <polygon fill="#A80036" points="644,719.5469,634,723.5469,644,727.5469,640,723.5469" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="800" y1="723.5469" y2="723.5469" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="650" y="718.481">SUCCESS</text>
        <polygon fill="#A80036" points="395,748.6797,385,752.6797,395,756.6797,391,752.6797" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="389" x2="627" y1="752.6797" y2="752.6797" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="401" y="747.6138">SUCCESS</text>
        <rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="922.5" x="3" y="781.2461" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="781.2461" y2="781.2461" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="784.2461" y2="784.2461" />
        <rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="73" x="427.75" y="770.6797" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="433.75" y="786.7466">DELETE</text>
        <polygon fill="#FBFB77" points="42,808.8125,293,808.8125,303,827.8125,293,846.8125,42,846.8125,32,827.8125,42,808.8125" style="stroke: #A80036; stroke-width: 1.0;" />
        <ellipse cx="49.5" cy="820.4453" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="55" y="824.8794">user deleted a public model</text>
        <ellipse cx="49.5" cy="835.5781" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="55" y="840.0122">user made a public model non-public</text>
        <polygon fill="#A80036" points="367,869.2109,377,873.2109,367,877.2109,371,873.2109" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="173" x2="373" y1="873.2109" y2="873.2109" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="180" y="868.145">delete_model(id)</text>
        <polygon fill="#A80036" points="611,898.3438,621,902.3438,611,906.3438,615,902.3438" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="617" y1="902.3438" y2="902.3438" /><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="396" y="897.2778">delete_model</text>
        <polygon fill="#A80036" points="784,927.4766,794,931.4766,784,935.4766,788,931.4766" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="790" y1="931.4766" y2="931.4766" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="640" y="926.4106">delete model</text>
        <polygon fill="#A80036" points="644,956.6094,634,960.6094,644,964.6094,640,960.6094" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="800" y1="960.6094" y2="960.6094" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="650" y="955.5435">SUCCESS</text>
        <polygon fill="#A80036" points="400,985.7422,390,989.7422,400,993.7422,396,989.7422" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="627" y1="989.7422" y2="989.7422" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="406" y="984.6763">SUCCESS</text>
        <polygon fill="#A80036" points="184,1014.875,174,1018.875,184,1022.875,180,1018.875" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="373" y1="1018.875" y2="1018.875" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="190" y="1013.8091">SUCCESS</text>
        <rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="922.5" x="3" y="1047.4414" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="1047.4414" y2="1047.4414" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="1050.4414" y2="1050.4414" />
        <rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="77" x="425.75" y="1036.875" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="431.75" y="1052.9419">UPDATE</text>
        <polygon fill="#FBFB77" points="74,1075.0078,262,1075.0078,272,1094.0078,262,1113.0078,74,1113.0078,64,1094.0078,74,1075.0078" style="stroke: #A80036; stroke-width: 1.0;" />
        <ellipse cx="81.5" cy="1086.6406" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="87" y="1091.0747">user uploads a new version</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="88" y="1106.2075">to a public model</text>
        <polygon fill="#A80036" points="367,1135.4063,377,1139.4063,367,1143.4063,371,1139.4063" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="173" x2="373" y1="1139.4063" y2="1139.4063" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="180" y="1134.3403">update_model(id)</text>
        <path d="M315,1152.4063 L315,1192.4063 L863,1192.4063 L863,1162.4063 L853,1152.4063 L315,1152.4063 " fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.0;" />
        <path d="M853,1152.4063 L853,1162.4063 L863,1162.4063 L853,1152.4063 " fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="534.25" y="1169.4731">1.</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="550.25" y="1169.4731">do a DELETE</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="534.25" y="1184.606">2.</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="550.25" y="1184.606">do an INSERT</text>
        <polygon fill="#A80036" points="184,1214.8047,174,1218.8047,184,1222.8047,180,1218.8047" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="373" y1="1218.8047" y2="1218.8047" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="190" y="1213.7388">SUCCESS</text>
        <rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="922.5" x="3" y="1247.3711" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="1247.3711" y2="1247.3711" />
        <line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="925.5" y1="1250.3711" y2="1250.3711" />
        <rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="68" x="430.25" y="1236.8047" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="436.25" y="1252.8716">BATCH</text>
        <polygon fill="#FBFB77" points="18,1274.9375,319,1274.9375,329,1308.9375,319,1342.9375,18,1342.9375,8,1308.9375,18,1274.9375" style="stroke: #A80036; stroke-width: 1.0;" />
        <ellipse cx="25.5" cy="1286.5703" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="31" y="1291.0044">admin forces recreation of masymos-db</text>
        <ellipse cx="25.5" cy="1301.7031" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="31" y="1306.1372">can take several hours</text>
        <ellipse cx="25.5" cy="1316.8359" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="31" y="1321.27">data is not usable before annotating is done,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="32" y="1336.4028">so wait with the SUCCESS until finished</text>
        <polygon fill="#A80036" points="367,1365.6016,377,1369.6016,367,1373.6016,371,1369.6016" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="173" x2="373" y1="1369.6016" y2="1369.6016" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="180" y="1364.5356">insert_models(id&lt;&lt;List&gt;&gt;)</text>
        <polygon fill="#A80036" points="184,1394.7344,174,1398.7344,184,1402.7344,180,1398.7344" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="378" y1="1398.7344" y2="1398.7344" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="190" y="1393.6685">get json (link)</text>
        <polygon fill="#A80036" points="367,1408.7344,377,1412.7344,367,1416.7344,371,1412.7344" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="173" x2="373" y1="1412.7344" y2="1412.7344" />
        <polygon fill="#A80036" points="611,1437.8672,621,1441.8672,611,1445.8672,615,1441.8672" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="617" y1="1441.8672" y2="1441.8672" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="396" y="1436.8013">delete whole database</text>
        <polygon fill="#A80036" points="784,1467,794,1471,784,1475,788,1471" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="790" y1="1471" y2="1471" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="640" y="1465.9341">delete whole database</text>
        <polygon fill="#A80036" points="644,1481,634,1485,644,1489,640,1485" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="800" y1="1485" y2="1485" />
        <polygon fill="#A80036" points="400,1510.1328,390,1514.1328,400,1518.1328,396,1514.1328" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="627" y1="1514.1328" y2="1514.1328" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="406" y="1509.0669">SUCCESS</text>
        <path d="M322,1529.1328 L399,1529.1328 L399,1536.1328 L389,1546.1328 L322,1546.1328 L322,1529.1328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;" />
        <rect fill="none" height="207.9297" style="stroke: #000000; stroke-width: 2.0;" width="593.5" x="322" y="1529.1328" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="337" y="1542.1997">loop</text><text fill="#000000" font-family="Helvetica" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="414" y="1541.3433">[id_list]</text>
        <path d="M332,1553.2656 L409,1553.2656 L409,1560.2656 L399,1570.2656 L332,1570.2656 L332,1553.2656 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;" />
        <rect fill="none" height="176.7969" style="stroke: #000000; stroke-width: 2.0;" width="573.5" x="332" y="1553.2656" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="347" y="1566.3325">loop</text><text fill="#000000" font-family="Helvetica" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="424" y="1565.4761">[insert each content]</text>
        <polygon fill="#A80036" points="611,1587.5313,621,1591.5313,611,1595.5313,615,1591.5313" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="617" y1="1591.5313" y2="1591.5313" /><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="396" y="1586.4653">add_model</text>
        <polygon fill="#A80036" points="913.5,1616.6641,923.5,1620.6641,913.5,1624.6641,917.5,1620.6641" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="919.5" y1="1620.6641" y2="1620.6641" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="640" y="1615.5981">get file from the Internet</text>
        <polygon fill="#A80036" points="644,1630.6641,634,1634.6641,644,1638.6641,640,1634.6641" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="924.5" y1="1634.6641" y2="1634.6641" />
        <polygon fill="#A80036" points="784,1659.7969,794,1663.7969,784,1667.7969,788,1663.7969" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="790" y1="1663.7969" y2="1663.7969" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="640" y="1658.731">insert new model</text>
        <polygon fill="#A80036" points="644,1688.9297,634,1692.9297,644,1696.9297,640,1692.9297" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="800" y1="1692.9297" y2="1692.9297" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="650" y="1687.8638">SUCCESS</text>
        <polygon fill="#A80036" points="400,1718.0625,390,1722.0625,400,1726.0625,396,1722.0625" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="627" y1="1722.0625" y2="1722.0625" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="406" y="1716.9966">SUCCESS</text>
        <polygon fill="#A80036" points="611,1791.4609,621,1795.4609,611,1799.4609,615,1795.4609" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="617" y1="1795.4609" y2="1795.4609" /><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="396" y="1760.1294">create_annotation_index</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="396" y="1775.2622">upgrade annotations, etc.</text><text fill="#000000" font-family="Helvetica" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="107" x="396" y="1790.395">for the whole DB</text>
        <path d="M559.5,1810.4609 L636.5,1810.4609 L636.5,1817.4609 L626.5,1827.4609 L559.5,1827.4609 L559.5,1810.4609 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;" />
        <rect fill="none" height="118.5313" style="stroke: #000000; stroke-width: 2.0;" width="346" x="559.5" y="1810.4609" /><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="574.5" y="1823.5278">loop</text><text fill="#000000" font-family="Helvetica" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="651.5" y="1822.6714">[annotations]</text>
        <polygon fill="#A80036" points="913.5,1844.7266,923.5,1848.7266,913.5,1852.7266,917.5,1848.7266" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="919.5" y1="1848.7266" y2="1848.7266" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="640" y="1843.6606">get data from the Internet</text>
        <polygon fill="#A80036" points="644,1858.7266,634,1862.7266,644,1866.7266,640,1862.7266" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="924.5" y1="1862.7266" y2="1862.7266" />
        <polygon fill="#A80036" points="784,1887.8594,794,1891.8594,784,1895.8594,788,1891.8594" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="790" y1="1891.8594" y2="1891.8594" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="640" y="1886.7935">insert additional data</text>
        <polygon fill="#A80036" points="644,1916.9922,634,1920.9922,644,1924.9922,640,1920.9922" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="638" x2="800" y1="1920.9922" y2="1920.9922" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="650" y="1915.9263">SUCCESS</text>
        <polygon fill="#A80036" points="400,1953.125,390,1957.125,400,1961.125,396,1957.125" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="627" y1="1957.125" y2="1957.125" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="406" y="1952.0591">SUCCESS</text>
        <polygon fill="#A80036" points="184,1982.2578,174,1986.2578,184,1990.2578,180,1986.2578" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="373" y1="1986.2578" y2="1986.2578" /><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="190" y="1981.1919">SUCCESS</text><text fill="#888888" font-family="Helvetica" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="95" x="830.5" y="12.2822">version: 24.09.2020</text>
        <!--MD5=[95ea5b9d066408804a4326ba731efb42]
@startuml

title MaSiMiWa - Sequence Overview
header version: %date("dd.MM.yyyy")
'header version: 23.11.2018

skinparam defaultFontName Helvetica
skinparam shadowing false

participant "SEEK" as seek
box "MaSyMoS"
    control "MaSiMiWa" as miwa
    control "MaSyMoS-Morre" as morre
    database "masymos_neo4j_database" as db


activate seek #aaf
    activate miwa #afa

== INSERT ==

hnote over seek
    * user added a public model
    * user made a model public
end note

seek            ->      miwa            : insert_model(id)
    activate miwa

seek            <-      miwa            : get json (link)
seek            - ->     miwa
    
    loop #ffe insert each content
    miwa            ->      morre           : ""add_model""
        activate morre
        
        morre           ->]                     : get file from the Internet
        morre           <- -]

        morre           ->      db              : insert new model
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
        
    miwa            <- -     morre           : SUCCESS
        deactivate morre
    end

seek            <- -     miwa            : SUCCESS
    miwa            ->      miwa        : start annotation job in background
    activate miwa

    miwa            ->      morre           : ""create_annotation_index""\nupgrade annotations, etc.\n//for the whole DB//
        activate morre

        morre           ->]                     : get data from the Internet
        morre           <- -]

        morre           ->      db              : insert additional data
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
    
    miwa            <- -     morre           : SUCCESS
        deactivate morre 
    deactivate miwa
    deactivate miwa








== DELETE ==

hnote over seek
    * user deleted a public model
    * user made a public model non-public
end note

seek            ->      miwa            : delete_model(id)
    activate miwa
    
    miwa            ->      morre           : ""delete_model""
        activate morre
    
        morre           ->      db              : delete model
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db

    miwa            <- -     morre           : SUCCESS
        deactivate morre 

seek            <-      miwa            : SUCCESS
    deactivate miwa 






== UPDATE ==

hnote over seek
    * user uploads a new version
       to a public model
end note

seek            ->      miwa            : update_model(id)
    activate miwa

    note over miwa,db #fff
        # do a DELETE
        # do an INSERT
    end note

seek            <-      miwa            : SUCCESS
    deactivate miwa 




== BATCH ==

hnote over seek
    * admin forces recreation of masymos-db
    * can take several hours
    * data is not usable before annotating is done,
       so wait with the SUCCESS until finished
end note

seek            ->      miwa            : insert_models(id<<List>>)
    activate miwa

seek            <-      miwa            : get json (link)
seek            - ->     miwa

    miwa            ->      morre           : delete whole database
        activate morre
        morre           ->      db              : delete whole database
            activate db
        morre           <- -     db
            deactivate db
    miwa            <- -     morre           : SUCCESS
        deactivate morre

    loop #efe id_list
    
    loop #ffe insert each content

    miwa            ->      morre           : ""add_model""
        activate morre
        
        morre           ->]                     : get file from the Internet
        morre           <- -]

        morre           ->      db              : insert new model
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
        
    miwa            <- -     morre           : SUCCESS
        deactivate morre
    
    end
    end

    miwa            ->      morre           : ""create_annotation_index""\nupgrade annotations, etc.\n//for the whole DB//
        activate morre

        loop #efe annotations

        morre           ->]                     : get data from the Internet
        morre           <- -]

        morre           ->      db              : insert additional data
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
        
        end
    
    miwa            <- -     morre           : SUCCESS
        deactivate morre 

seek            <- -     miwa            : SUCCESS

    deactivate miwa






@enduml

@startuml

title MaSiMiWa - Sequence Overview
header version: 24.09.2020

skinparam defaultFontName Helvetica
skinparam shadowing false

participant "SEEK" as seek
box "MaSyMoS"
    control "MaSiMiWa" as miwa
    control "MaSyMoS-Morre" as morre
    database "masymos_neo4j_database" as db


activate seek #aaf
    activate miwa #afa

== INSERT ==

hnote over seek
    * user added a public model
    * user made a model public
end note

seek            ->      miwa            : insert_model(id)
    activate miwa

seek            <-      miwa            : get json (link)
seek            - ->     miwa
    
    loop #ffe insert each content
    miwa            ->      morre           : ""add_model""
        activate morre
        
        morre           ->]                     : get file from the Internet
        morre           <- -]

        morre           ->      db              : insert new model
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
        
    miwa            <- -     morre           : SUCCESS
        deactivate morre
    end

seek            <- -     miwa            : SUCCESS
    miwa            ->      miwa        : start annotation job in background
    activate miwa

    miwa            ->      morre           : ""create_annotation_index""\nupgrade annotations, etc.\n//for the whole DB//
        activate morre

        morre           ->]                     : get data from the Internet
        morre           <- -]

        morre           ->      db              : insert additional data
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
    
    miwa            <- -     morre           : SUCCESS
        deactivate morre 
    deactivate miwa
    deactivate miwa








== DELETE ==

hnote over seek
    * user deleted a public model
    * user made a public model non-public
end note

seek            ->      miwa            : delete_model(id)
    activate miwa
    
    miwa            ->      morre           : ""delete_model""
        activate morre
    
        morre           ->      db              : delete model
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db

    miwa            <- -     morre           : SUCCESS
        deactivate morre 

seek            <-      miwa            : SUCCESS
    deactivate miwa 






== UPDATE ==

hnote over seek
    * user uploads a new version
       to a public model
end note

seek            ->      miwa            : update_model(id)
    activate miwa

    note over miwa,db #fff
        # do a DELETE
        # do an INSERT
    end note

seek            <-      miwa            : SUCCESS
    deactivate miwa 




== BATCH ==

hnote over seek
    * admin forces recreation of masymos-db
    * can take several hours
    * data is not usable before annotating is done,
       so wait with the SUCCESS until finished
end note

seek            ->      miwa            : insert_models(id<<List>>)
    activate miwa

seek            <-      miwa            : get json (link)
seek            - ->     miwa

    miwa            ->      morre           : delete whole database
        activate morre
        morre           ->      db              : delete whole database
            activate db
        morre           <- -     db
            deactivate db
    miwa            <- -     morre           : SUCCESS
        deactivate morre

    loop #efe id_list
    
    loop #ffe insert each content

    miwa            ->      morre           : ""add_model""
        activate morre
        
        morre           ->]                     : get file from the Internet
        morre           <- -]

        morre           ->      db              : insert new model
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
        
    miwa            <- -     morre           : SUCCESS
        deactivate morre
    
    end
    end

    miwa            ->      morre           : ""create_annotation_index""\nupgrade annotations, etc.\n//for the whole DB//
        activate morre

        loop #efe annotations

        morre           ->]                     : get data from the Internet
        morre           <- -]

        morre           ->      db              : insert additional data
            activate db
        morre           <- -     db              : SUCCESS
            deactivate db
        
        end
    
    miwa            <- -     morre           : SUCCESS
        deactivate morre 

seek            <- -     miwa            : SUCCESS

    deactivate miwa






@enduml

PlantUML version 1.2020.16(Sun Aug 23 22:20:43 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
-->
    </g>
</svg>